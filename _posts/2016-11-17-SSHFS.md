---
layout: post
title: SSHFS или монтирование удаленных файлов по SSH
---

Установка Ubuntu/Debian
==========

SSHFS не входит в пакеты, которые ставятся по умолчанию, следовательно перед использованием их нужно установить:

```
sudo apt install sshfs
```


Монтирование
=============

Для начала создадим локальную папку для монтирования удалённой файловой системы (ФС)
```
sudo mkdir /mnt/remotefs
```

Далее можно непосреднственно смонтировать удалённую ФС.
```
sudo sshfs -o allow_other user@xxx.xxx.xxx.xxx:/ /mnt/remotefs
```

Теперь можно работать с удалёнными файлами как с локальным физичиским устройством. При создании файлов в /mnt/remotefs они будут автоматически загруженны на удалённый хост. Верно и обратное утверждение. 

Следует учитывать, что мы создаём только временную связь. Например, после выключения или перезагрузки какого-то из хостов, связь будет прервана.

Размонтирование
================

Когда необходимость связи пропадёт, то можно всё размонтировать:
```
sudo umount /mnt/remotefs
```

Монтирование на постоянной основе
==================================

SSHFS позволяет создавать постоянные соединения с удалёнными ФС, которые будут восстанавливаться после перезагрузок или выключений. Для этого нужно изменить /etc/fstab на локальном хосте

```
sudo nano /etc/fstab
```

И добавить в его конец 
```
sshfs#user@xxx.xxx.xxx.xxx:/ /mnt/remotefs
```
